\chapter{Algebraic Integers}
	\setcounter{page}{1}
	\pagenumbering{arabic}
	\section{Integral closure and algebraic integers}
		\subsection{Definition and examples}
			Problems in solving polynomial equations give rise to a lot of concepts in algebra and geometry. If we are specifically interested in $\mds{Z}$, we have the concept of \textbf{algebraic integers}.
			\begin{definition}
				A finite extension $K$ of the rational number $\mds{Q}$ is called a \textbf{number field}. The integral closure of $\mds{Z}$ in $K$ is called the ring of \textbf{algebraic integers} of $K$, and is denoted by $\OK$. To be precise, every element $x \in \OK$ is a zero of a monic polynomial $f \in \Z[X].$
			\end{definition}
			
			For this concept we have a lot of classic examples:
			
			\begin{example}
				If $K=\Q$, then $\OK$ is simply $\Z$. This is intuitive because suppose $x=a/b \in \Q$ is integral over $\Z$ where $(a,b)=1$, then
				\[
				x^n+c_1x^{n-1}+\cdots+c_n = 0
				\]
				where $c_i \in \Z$. Multiplying by $b^n$ yields
				\[
				a^n+c_1a^{n-1}b+\cdots+c_nb = 0
				\]
				Hence $b$ divides $a^n$. But we also have $(a^n,b)=1$, hence $b=\pm 1$, which is to say $x \in \Z$.
				
				There is an more general setting. Since $\Z$ is a unique factorial domain (UFD), and UFD is integrally closed \href{https://proofwiki.org/wiki/Unique_Factorization_Domain_is_Integrally_Closed}{[proof]}, we have $\Z=\OK$. 
			\end{example}
			
			\begin{example}
				The Gaussian rational $\Q(i)=K$. Indeed it is natural to consider Gaussian integer $\Z[i]$ first. For any $z=m+ni \in \Z[i]$, we have
				\[
				z^2-2mz+m^2+n^2=0
				\]
				Hence $\Z[i] \subset \OK$. The converse is similar to our proof when $K=\Q$.
			\end{example}
			
			\begin{example}
				Cyclotomic field $K=Q(\xi_n)$, where $\xi_n$ is the root of $x^n-1$. In this case we have $\OK = \Z[\xi_n]$.
			\end{example}
			
			\begin{example}
				Quadratic field $K=\Q(\sqrt{d})$, where $d$ is a square-free integer $>1$. This time the algebraic integer ring is different from what you may have thought: $\OK = \Z[\omega]$ where
				\[
				\omega = \begin{cases}
					\frac{1+\sqrt{d}}{2}, &\quad d = 4k+1, \\
					\sqrt{d}, &\quad \text{otherwise}.
				\end{cases}
				\]
			\end{example}
			It turns out we are studying polynomials such as
			\begin{itemize}
				\item $x^2+1=0$.
				\item $x^n-1=0$.
				\item $x^2-d=0$.
			\end{itemize}
		It also turns out that many properties are not restricted to $\Z$, but to a specific class of rings. Hence we will investigate some properties in the sense of commutative ring theory.
		\subsection{Algebraic extension and integral closure}
			First of all we show that being algebraic almost implies being integral. 
			\begin{lemma}\label{alg-int}
				Let $A$ be a domain, $K$ its quotient field, and $x$ algebraic over $K$. Then there exists an element $c \ne 0$ of $A$ such that $cx$ is integral over $A$.
			\end{lemma}
			\begin{proof}
				Since $x$ is algebraic, we have an equation
				\[
					a_nx^n+\cdots+a_0=0
				\]
				with $a_i \in A$ and $a_n \ne 0$. Hence
				\[
					a_n^{n-1}(a_nx^n+\cdots+a_0)=(a_nx)^n+\cdots+a_0a_n^{n-1}=0
				\]
				which is to say $a_nx$ is integral over $A$. 
			\end{proof}
			
			Since finite extensions are algebraic, we are always free to use this lemma for the topic of number field.
			
			\begin{theorem}\label{closure-f-g}
				Let $A$ be an integrally closed Noetherian ring. Let $L$ be a finite separable extension of its quotient field $K$. Then the integral closure of $A$ in $L$ is finitely generated over $A$.
			\end{theorem}
			\begin{proof}
				Since $A$ is Noetherian, all submodules of a finitely generated module over $A$ is finitely generated. Hence it suffices to prove that the integral closure of $A$ is contained in a finitely generated $A$-module.\\
				Let $w_1,\dots,w_n$ be a basis of $L$ over $K$. After multiplying each $w_i$ by some suitable element of $A$ (see lemma \ref{alg-int}), we may assume without loss of generality that the $w_i$ are integral over $A$. To study the integral closure of $A$ in $L$, we pick an arbitrary element $z = b_1w_1+\cdots+b_nw_n$ and study its coefficients. \\
				Since $L/K$ is separable, the \href{https://stacks.math.columbia.edu/tag/0BIF}{field trace} form
				\[
					Q_{L/K}:L \times L \to K, \quad (x,y) \mapsto \tr_{L/K}(xy)
				\]
				is non-degenerate  \href{https://stacks.math.columbia.edu/tag/0BIL}{[proof]}, so we claim that $L^\ast$ is isomorphic to $L$ under $Q_{L/K}$. Indeed, one can define a $K$-linear map
				\[
					d:L \to L^\ast, \quad x \mapsto (y \mapsto Q_{L/K}(x,y)=\tr(xy)).
				\]
				This map is injective because $Q_{L/K}$ is non-degenerate. Since $L$ and $L^\ast$ has the same dimension, $d$ has to be surjective.\\
				Let $w^1,\dots,w^n$ be the dual basis of $w_1,\dots,w_n$. If we put $v_i=d^{-1}(w^i)$, we have
				\[
					\tr(v_i w_j) = \delta_{ij}.
				\]
				Let $c \ne 0$ be an element of $A$ such that $cv_i$ is integral over $A$, then $cv_iz$ is integral and so is $\tr(cv_iz)$. Since $\tr$ is a $K$-valued function, we have
				\[
					\tr(czv_i)=c\tr(v_iz)=c d(v_i)(z) = cb_i \in A \implies b_i \in Ac^{-1}.
				\]
				Hence
				\[
					z \in Ac^{-1}w_1+\cdots+Ac^{-1}w_n
				\]
				which is to say $z$ is finitely generated. Since $z$ is arbitrarily picked, the closure itself is contained in a finitely generated $A$-module, which finishes the proof. 
			\end{proof}
			Note $Z$ is itself a Noetherian ring and integrally closed. $\Q$ is the fraction ring of $\Z$, and finite extensions of $\Q$ are always separable. It follows (non-trivially) that
			\begin{corollary}
				$\OK$ is finitely generated over $\Z$.
			\end{corollary}
			
			Next we study the rank of $\OK$ over $\Z$. Being finitely generated is not exactly what we want.
			
			\begin{theorem}
				Let $A$ be a principal ideal ring, and $L$ a finite separable extension of its quotient field $K$, of degree $n$. Let $B$ be the integral closure of $A$ in $L$. Then $B$ is a free module of rank $n$ over $A$. 
			\end{theorem}
		
			\begin{proof}
				Since $A$ is contained in $K$, $B$ is contained in $L$, whenever $ab=0$ with $a \in A$, $b \in B$, we have $a=0$ or $b=0$. Hence $B$ is torsion-free. Therefore as a finitely generated (theorem \ref{closure-f-g}) torsion-free module, $B$ is a free module over $A$ \href{http://du.ac.in/du/uploads/departments/mathematics/study-material/MMATH18-201\%20_MT_PID.pdf}{[Theorem 2.7]}. Since $L$ is a $n$-dimensional vector space over $K$, for $y \in L$ we have
				\[
					y = c_1e_1+\cdots+c_ne_n
				\]
				where $e_1,\dots,e_n$ is a basis and $c_1,\cdots,c_n \in K$. When $y \in B$, we must have $c_1,\cdots,c_n \in A$, which is to say $B$ has rank $[L:K]=n$.
			\end{proof}
			Hence the rank of $\OK$ over $\Z$ is determined by $[K:\Q]$.
		
		\subsection{Localisation}
		
			\begin{theorem}
				Let $A \subset B$ be rings, and $S$ a multiplicatively closed subset of $A$. If $B$ is integral over $A$, then $S^{-1}B$ is integrally closed in $S^{-1}A$. If $C$ is the integral closure of $A$ in $B$, then $S^{-1}C$ is the integral closure of $S^{-1}A$. 
			\end{theorem}
		
			\begin{proof}
				First we assume $B$ is integral over $A$. Pick $x/s \in S^{-1}B$ with $x \in B$ and $s \in S$. By definition we have
				\[
					x^n + a_1x^{n-1}+\cdots + a_n = 0
				\]
				with $a_i \in A$. Multiplying by $(1/s)^n$ gives
				\[
					(x/s)^n + (a_1/s)(x/s)^{n-1}+\cdots+a_n/s^n = 0
				\]
				which shows that $x/s$ is integral over $S^{-1}A$. Hence the first statement is proved. \\
				Now we assume $C$ is the integral closure of $A$ in $B$. By the first statement we see $S^{-1}C$ is integral over $S^{-1}A$. Suppose $b/s \in S^{-1}B$ is integral over $S^{-1}A$, we have an equation of the form
				\[
					(b/s)^n+(a_1/s_1)(b/s)^{n-1}+\cdots+a_n/s_n=0.
				\]
				Multiplying by $(st)^n$ where $t=s_1\cdots s_n$ gives an equation of integral independence for $bt$ over $A$. Hence $bt \in C$. But $b/s = bt/st$, hence $b/s \in S^{-1}C$ and we are done. 
			\end{proof}
		
			If $S$ happens to be a complement of a prime ideal $\mfk{p}$, we have a satisfying result
			
			\begin{corollary}
				If $B$ is integral over $A$, then $B_\mfk{p}$ is integral over $A_\mfk{p}$.
			\end{corollary}
			
			If $B$ is replaced by a field extension $L$ of the quotient field of $A$, and $C$ is replaced by the integral closure of $A$, we have the following corollary:
			
			\begin{corollary}
				If $B$ is the integral closure of $A$ in some field extension $L$ of the quotient field of $A$, then $S^{-1}B$ is the integral closure of $S^{-1}A$ in $L$.
			\end{corollary}
			
			% TODO: ADD SOME EXAMPLES
	\section{Galois extensions}
		\subsection{Decomposition group and decomposition field}
			If $K$ is a Galois extension of $\Q$, then the Galois group allows us to transform amongst prime ideals in a natural way. This is because of the following theorem.
			\[
				\begin{tikzcd}
					\mathfrak{P} \arrow[rr, "\exists \sigma \in G"] &                                    & \mathfrak{Q} \\
					& \mathfrak{p} \arrow[lu] \arrow[ru] &             
				\end{tikzcd}
			\]
			\begin{theorem}
				Let $A$ be a ring, integrally closed in its quotient field $K$. Let $L$ be a finite Galois extension of $K$ with group $G$. Let $\mfk{p}$ be a maximal ideal of $A$, and let $\mfk{P}$, $\mfk{Q}$ be prime ideals of the integral closure of $A$ in $L$ lying above $\mfk{p}$. Then there exists $\sigma \in G$ such that $\sigma\mfk{P} = \mfk{Q}$.
			\end{theorem}
			\begin{proof}
				Suppose that $\mfk{P}=\sigma\mfk{Q}$ for all $\sigma \in G$. By the Chinese remainder theorem, we have some $x \in B$ such that 
				\[
					\begin{aligned}
						x &\equiv 0 \mod \mfk{P} \\
						x &\equiv 1 \mod \sigma\mfk{Q}, \quad \forall \sigma \in G.
					\end{aligned}
				\]
				Then the norm
				\[
					N_K^L(x) = \prod_{\sigma \in G}\sigma{x}
				\]
				lies in $B \cap K = A$ since $A$ is integrally closed, and lies in $\mfk{P} \cap A = \mfk{p}=\mfk{Q} \cap A \subset \mfk{Q}$. But we also have $\sigma{x} \not\in \mfk{Q}$ for all $\sigma \in G$, hence $N_K^L(x) \not \in \mfk{Q}$, a contradiction.
			\end{proof}
			If one localise, the consideration on whether a prime ideal is maximal is not required. Besides, if $A$ is of Krull dimension $1$, then one has no need to consider as well. In next section we show that $\OK$ is always of Krull dimension $1$.
		\subsection{Inertia group and field}
		\subsection{Automorphisms}
	\section{Dedekind domain}
		\subsection{Prime Ideals}
			By theorem \ref{closure-f-g}, $\OK$ is a finitely-generated $\Z$-module, hence is a Noetherian domain. By transitivity of integral closures, $\OK$ is integrally closed. We are now interested in the Krull dimension of $\OK$. To do this, we investigate more of the prime ideal with respect to integral closure. 
			\begin{definition}
				Let $B$ be a ring containing a ring $A$. Let $\mfk{p}$ be a prime ideal of $A$ and $\mfk{P}$ a prime ideal of $B$. We say that $\mfk{P}$ \textbf{lies above} $\mfk{p}$ if $\mfk{P} \cap A = \mfk{p}$ and we then write $\mfk{P}|\mfk{p}$.
			\end{definition}
			
			If $\mfk{P}|\mfk{p}$, we have a commutative diagram:
			\[
				\begin{tikzcd}
					B \arrow[r, "\pi'"]               & B/\mathfrak{P}                  \\
					A \arrow[r, "\pi"] \arrow[u, "i"] & A/\mathfrak{p} \arrow[u, "i'"']
				\end{tikzcd}
			\]
			where $i$ and $i'$ are inclusions, $\pi$ and $\pi'$ are canonical homomorphisms. \\
			If $B$ is integral over $A$, then $B/\mfk{P}$ is integral over $A/\mfk{p}$, this is because of the following lemma if we take $\sigma$ to be $\pi$:
			\begin{lemma}
				Let $A \subset B$ be rings, and $\sigma:B \to C$ be a homomorphism. If $B$ is integral over $A$, then $\sigma(B)$ is integral over $\sigma(A)$.
			\end{lemma}
			\begin{proof}
				If $B$ is integral over $A$, then for any $x \in B$ there is an equation
				\[
					x^n + a_{n-1}x^{n-1}+\cdots+a_0 = 0.
				\]
				Therefore
				\[
					\begin{aligned}
						\sigma(x^n+a_{n-1}x^{n-1}+\cdots+a_0) &= \sigma(x^n)+\sigma(a_{n-1}x^{n-1})+\cdots+\sigma(a_0) \\
															  &= \sigma(x)^n + \sigma(a_{n-1})\sigma(x)^{n-1}+\cdots+\sigma(\sigma) \\
															  &= 0.
					\end{aligned}
				\]
				Hence $\sigma(x)$ is integral in $\sigma(A)$.
			\end{proof}
			
			We want to show that prime ideals of $\OK$ is maximal, and they should be corresponded to prime ideals in $\Z$, which is maximal. For this reason we show the existence of lying-above prime ideals.
			
			\begin{theorem}\label{lying-above}
				Let $A$ be a ring, $\mfk{p}$ a prime ideal, and $B \supset A$ integral over $A$. Then $\mfk{p}B \ne B$, and there exists a prime ideal $\mfk{P}$ of $B$ lying above $\mfk{p}$. 
			\end{theorem}
		
			\begin{proof}
				We know that $B_\mfk{p}$ is integral over $A_\mfk{p}$ (corollary \ref{int-loc}) and that $A_\mfk{p}$ is local with maximal ideal $\mfk{m}_\mfk{p}=\mfk{p}A_\mfk{p}$. It follows that
				\[
					\mfk{p}B_\mfk{p}=\mfk{p}A_\mfk{p}B = \mfk{p}A_\mfk{p}B_\mfk{p}=\mfk{m}_\mfk{p}B_\mfk{p}.
				\]
				Hence it suffices to prove our assertion when $A$ is local. If $\mfk{p}B=B$, we have an equation
				\[
					1 = a_1b_1+\cdots+a_nb_n
				\]
				with $a_i \in \mfk{p}$ and $b_i \in B$. Let $B_0 = A[b_1,\cdots,b_n]$. Then $\mfk{p}B_0=B_0$ and $B_0$ is a finitely generated $A$-module. Hence by Nakayama's lemma, $B_0=0$, which is absurd.
				
				To prove the existence of $\mfk{P}$, consider the following commutative diagram:
				\[
					\begin{tikzcd}
						B \arrow[r]           & B_\mathfrak{p}           \\
						A \arrow[r] \arrow[u] & A_\mathfrak{p} \arrow[u]
					\end{tikzcd}
				\]
				where all arrows are natural inclusions. As is proved, $\mfk{m}_\mfk{p}B_\mfk{p} \ne B_\mfk{p}$. Hence $\mfk{m}_\mfk{p}B_\mfk{p}$ is contained in a maximal ideal $\mfk{M}$ of $\mfk{p}$, and therefore $\mfk{M} \cap A_\mfk{p}$ contains $\mfk{m}_\mfk{p}$. And we pick $\mfk{P}=\mfk{M} \cap B$. Then $\mfk{P}$ is a prime ideal of $B$, and taking intersection with $A$ going both ways around our diagram shows that $\mfk{M} \cap A = \mfk{p}$, so that
				\[
					\mfk{P} \cap A = \mfk{p},
				\]
				as was to be shown.
			\end{proof}
		
			Now we proceed to the crucial theorem to determine whether a prime lying above is maximal.
			
			\begin{theorem}\label{lie-above-maximal}
				Let $A$ be a subring of $B$, and assume $B$ is integral over $A$. Let $\mfk{P}$ be a prime ideal of $B$ lying over a prime ideal $\mfk{p}$ of $A$. Then $\mfk{P}$ is maximal $\iff$ $\mfk{p}$ is maximal.
			\end{theorem}
		
			\begin{proof}
				$\implies$: Note $B/\mfk{P}$ is a field and is integral over the ring $A/\mfk{p}$. Were $A/\mfk{p}$ not a field, there would be a non-trivial ideal $\mfk{m}$ of it, and $B/\mfk{P}$ would have a prime ideal $\mfk{M}$ lying above $\mfk{m}$, by theorem \ref{lying-above}. A contradiction. \\
				$\impliedby$: Note $A/\mfk{p}$ is a field. It suffices to prove that a ring $R$ which is integral over a field $k$ is a field. If $k$ is a field and non-zero $x \in R$ is integral over $k$, we have a minimal polynomial
				\[
					x^n+c_{n-1}y^{n-1}+\cdots+c_0=0
				\]
				with $c_i \in k$. Since $R$ is integral, we have $c_0 \ne 0$. We can clearly write
				\[
					x^{-1}=-c_0^{-1}(x^{n-1}+c_{n-1}y_{n-2}+\cdots+c_1) \in R,
				\]
				which is to say $R$ is integral, and the theorem is therefore proved.
			\end{proof}
			
			And now we are ready to prove that $\OK$ is Dedekind.
			
			\begin{theorem}\label{o_k-dedekind}
				Every prime ideal $P$ in $\OK$ is maximal. Hence $\OK$ is of Krull dimension $1$ and is therefore Dedekind.
			\end{theorem}
			
			\begin{proof}
				Note it suffices to prove that every prime ideal $\mfk{P}$ of $\OK$ lies above some prime ideal of $\Z$, since $\Z$ has Krull dimension $1$, and the proof follows from theorem \ref{lie-above-maximal}. All we need to do is to prove that $\mfk{P} \cap \Z$ is non-zero: since the inverse image of a prime ideal is prime, we are done. For each $x \in \mfk{P}$, we have a minimal polynomial $f \in \Z[X]$ such that
				\[
					f(x) = x^n+c_{n-1}x^{n-1}+\cdots+c_0=0
				\]
				with $c_i \in \Z$ and $c_0 \ne 0$. It follows that
				\[
					c_0=-(x^n+c_{n-1}x^{n-1}+\cdots+c_1x) \in \mfk{P} \cap \Z,
				\]
				which is to say $\mfk{P} \cap \Z$ is indeed non-zero. This concludes the proof.
			\end{proof}
			\begin{example}
				As a class example, consider $K=\Q(\sqrt{-5})$, and $\OK = \Z[\sqrt{-5}]$. This ring is not a unique factorial domain because we have
				\[
					6 = 2 \cdot 3 = (1-\sqrt{-5}) \cdot (1+\sqrt{-5}).
				\]
				But if we view in the sense of product of ideals, nothing goes wrong. Let $\mfk{m}$ be the maximal ideal containing $6$, then
				\[
					\mfk{m} = (2,1-\sqrt{-5})(2,1+\sqrt{-5})
				\]
				is unique. Note two ideals on the right hand side are indeed maximal (hence prime) because
				\[
					\begin{aligned}
						\frac{\Z[\sqrt{-5}]}{(2,1-\sqrt{-5})} &\cong \frac{\Z[X]/(X^2+5)}{(2,1-X,X^2+5)/(X^2+5)} \\
															 &\cong \frac{\Z[X]}{(2,1-X,X^2+5)} \cong \frac{\Z_2[X]}{(1-X,X^2-1)} \cong \frac{\Z_2[X]}{(1-X)} \cong \Z_2.
					\end{aligned}
				\]
				Likewise,
				\[
					\begin{aligned}
						\frac{\Z[\sqrt{-5}]}{(3,1+\sqrt{-5})} &\cong \frac{\Z[X]/(X^2+5)}{(3,1+X,X^2+5)/(X^2+5)} \\
															  &\cong \frac{\Z[X]}{(3,1+X,X^2+5)} \cong \frac{\Z_3[X]}{(1+X,X^2-1)} \cong \frac{\Z_3[X]}{(1+X)} \cong Z_3.
					\end{aligned}
				\]
			\end{example}
		\subsection{Ramification index}
		
		\subsection{Norm}
		
		\subsection{Discrete valuation rings}
			A \textbf{discrete valuation ring} can be considered as a localisation of Dedekind domain. Indeed, if $A$ is a discrete valuation ring, then $A$ is Noetherian and of Krull dimension $1$, and is integrally closed, hence Dedekind. If $A$ is local and Dedekind, then $A$ is a discrete valuation ring. In general, a Noetherian domain $A$ of Krull dimension one is Dedekind if and only if the localisation $A_\mfk{p}$ is a discrete valuation ring for all prime $\mfk{p}$. With respect to localisation we have a natural result:
			\begin{theorem}
				Let $A$ be a Dedekind ring and $M,N$ two modules over $A$. If $M_\mfk{p} \subset N_\mfk{p}$ for all prime $\mfk{p}$, then $M \subset N$.
			\end{theorem}
			\begin{proof}
				Let $a \in M$. For each $\mfk{p}$ we can find $x_\mfk{p} \in N$ and $s_\mfk{p} \in A \setminus \mfk{p}$ such that $a = x_\mfk{p}/s_\mfk{p}$. Let $\mfk{b}$ be the ideal generated by the $s_\mfk{p}$, ranging through all $\mfk{p} \in \spec(A)$. Then $\mfk{b}$ is the unit ideal $A$, and we can write
				\[
					1 = \sum_{\mfk{p} \in \spec(A)} y_\mfk{p}s_\mfk{p}
				\]
				with elements $y_\mfk{p} \in A$ all but a finite number of which are $0$. This yields
				\[
					a = \sum_{\mfk{p} \in \spec(A)} y_\mfk{p}s_\mfk{p}a = \sum_{\mfk{p} \in \spec(A)} y_\mfk{p}x_\mfk{p} \in N
				\]
				as desired.
			\end{proof}
		
			Now we study torsion-free modules over a discrete valuation ring. If $A$ is a discrete valuation ring, then in particular, $A$ is a principal ideal ring, and any finitely generated torsion-free module $M$ over $A$ is free. If its rank is $n$, and if $\mfk{p}$ is the maximal idea, then $M/\mfk{p}M$ is a free module of rank $n$. Further, we have
			\begin{theorem}
				Let $A$ be a local ring and $M$ a free module of rank $n$ over $A$. Let $\mfk{p}$ be the maximal ideal of $A$. Then $M/\mfk{p}M$ is a vector space of dimension $n$ over $A/\mfk{p}$.
			\end{theorem}
			\begin{proof}
				Let $\{x_1,\dots,x_n\}$ be a basis of $M$ over $A$, then
				\[
					M \cong \bigoplus_{i}Ax_i
				\]
				and
				\[
					M/\mfk{p}M \cong \bigoplus_{i}(A/\mfk{p})\overline{x}_i
				\]
				where $\overline{x}_i$ is the residue class of $x_i$ mod $\mfk{p}$.
			\end{proof}