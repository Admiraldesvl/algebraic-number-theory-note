\chapter{Algebraic Integers}
	\section{Integral closure and algebraic integers}
		\subsection{Definition and examples}
			Problems in solving polynomial equations give rise to a lot of concepts in algebra and geometry. If we are specifically interested in $\mds{Z}$, we have the concept of \textbf{algebraic integers}.
			\begin{definition}
				A finite extension $K$ of the rational number $\mds{Q}$ is called a \textbf{number field}. The integral closure of $\mds{Z}$ in $K$ is called the ring of \textbf{algebraic integers} of $K$, and is denoted by $\OK$. To be precise, every element $x \in \OK$ is a zero of a monic polynomial $f \in \Z[X].$
			\end{definition}
			
			For this concept we have a lot of classic examples:
			
			\begin{example}
				If $K=\Q$, then $\OK$ is simply $\Z$. This is intuitive because suppose $x=a/b \in \Q$ is integral over $\Z$ where $(a,b)=1$, then
				\[
				x^n+c_1x^{n-1}+\cdots+c_n = 0
				\]
				where $c_i \in \Z$. Multiplying by $b^n$ yields
				\[
				a^n+c_1a^{n-1}b+\cdots+c_nb = 0
				\]
				Hence $b$ divides $a^n$. But we also have $(a^n,b)=1$, hence $b=\pm 1$, which is to say $x \in \Z$.
				
				There is an more general setting. Since $\Z$ is a unique factorial domain (UFD), and UFD is integrally closed \href{https://proofwiki.org/wiki/Unique_Factorization_Domain_is_Integrally_Closed}{[proof]}, we have $\Z=\OK$. 
			\end{example}
			
			\begin{example}
				The Gaussian rational $\Q(i)=K$. Indeed it is natural to consider Gaussian integer $\Z[i]$ first. For any $z=m+ni \in \Z[i]$, we have
				\[
				z^2-2mz+m^2+n^2=0
				\]
				Hence $\Z[i] \subset \OK$. The converse is similar to our proof when $K=\Q$.
			\end{example}
			
			\begin{example}
				Cyclotomic field $K=Q(\xi_n)$, where $\xi_n$ is the root of $x^n-1$. In this case we have $\OK = \Z[\xi_n]$.
			\end{example}
			
			\begin{example}
				Quadratic field $K=\Q(\sqrt{d})$, where $d$ is a square-free integer $>1$. This time the algebraic integer ring is different from what you may have thought: $\OK = \Z[\omega]$ where
				\[
				\omega = \begin{cases}
					\frac{1+\sqrt{d}}{2}, &\quad d = 4k+1, \\
					\sqrt{d}, &\quad \text{otherwise}.
				\end{cases}
				\]
			\end{example}
			It turns out we are studying polynomials such as
			\begin{itemize}
				\item $x^2+1=0$.
				\item $x^n-1=0$.
				\item $x^2-d=0$.
			\end{itemize}
		It also turns out that many properties are not restricted to $\Z$, but to a specific class of rings. Hence we will investigate some properties in the sense of commutative ring theory.
		\subsection{Algebraic extension and integral closure}
			First of all we show that being algebraic almost implies being integral. 
			\begin{lemma}\label{alg-int}
				Let $A$ be a domain, $K$ its quotient field, and $x$ algebraic over $K$. Then there exists an element $c \ne 0$ of $A$ such that $cx$ is integral over $A$.
			\end{lemma}
			\begin{proof}
				Since $x$ is algebraic, we have an equation
				\[
					a_nx^n+\cdots+a_0=0
				\]
				with $a_i \in A$ and $a_n \ne 0$. Hence
				\[
					a_n^{n-1}(a_nx^n+\cdots+a_0)=(a_nx)^n+\cdots+a_0a_n^{n-1}=0
				\]
				which is to say $a_nx$ is integral over $A$. 
			\end{proof}
			
			Since finite extensions are algebraic, we are always free to use this lemma for the topic of number field.
			
			\begin{theorem}\label{closure-f-g}
				Let $A$ be an integrally closed Noetherian ring. Let $L$ be a finite separable extension of its quotient field $K$. Then the integral closure of $A$ in $L$ is finitely generated over $A$.
			\end{theorem}
			\begin{proof}
				Since $A$ is Noetherian, all submodules of a finitely generated module over $A$ is finitely generated. Hence it suffices to prove that the integral closure of $A$ is contained in a finitely generated $A$-module.\\
				Let $w_1,\dots,w_n$ be a basis of $L$ over $K$. After multiplying each $w_i$ by some suitable element of $A$ (see lemma \ref{alg-int}), we may assume without loss of generality that the $w_i$ are integral over $A$. To study the integral closure of $A$ in $L$, we pick an arbitrary element $z = b_1w_1+\cdots+b_nw_n$ and study its coefficients. \\
				Since $L/K$ is separable, the \href{https://stacks.math.columbia.edu/tag/0BIF}{field trace} form
				\[
					Q_{L/K}:L \times L \to K, \quad (x,y) \mapsto \tr_{L/K}(xy)
				\]
				is non-degenerate  \href{https://stacks.math.columbia.edu/tag/0BIL}{[proof]}, so we claim that $L^\ast$ is isomorphic to $L$ under $Q_{L/K}$. Indeed, one can define a $K$-linear map
				\[
					d:L \to L^\ast, \quad x \mapsto (y \mapsto Q_{L/K}(x,y)=\tr(xy)).
				\]
				This map is injective because $Q_{L/K}$ is non-degenerate. Since $L$ and $L^\ast$ has the same dimension, $d$ has to be surjective.\\
				Let $w^1,\dots,w^n$ be the dual basis of $w_1,\dots,w_n$. If we put $v_i=d^{-1}(w^i)$, we have
				\[
					\tr(v_i w_j) = \delta_{ij}.
				\]
				Let $c \ne 0$ be an element of $A$ such that $cv_i$ is integral over $A$, then $cv_iz$ is integral and so is $\tr(cv_iz)$. Since $\tr$ is a $K$-valued function, we have
				\[
					\tr(czv_i)=c\tr(v_iz)=c d(v_i)(z) = cb_i \in A \implies b_i \in Ac^{-1}.
				\]
				Hence
				\[
					z \in Ac^{-1}w_1+\cdots+Ac^{-1}w_n
				\]
				which is to say $z$ is finitely generated. Since $z$ is arbitrarily picked, the closure itself is contained in a finitely generated $A$-module, which finishes the proof. $\qed$
			\end{proof}
			Note $Z$ is itself a Noetherian ring and integrally closed. $\Q$ is the fraction ring of $\Z$, and finite extensions of $\Q$ are always separable. It follows (non-trivially) that
			\begin{corollary}
				$\OK$ is finitely generated over $\Z$.
			\end{corollary}
			
			Next we study the rank of $\OK$ over $\Z$. Being finitely generated is not exactly what we want.
			
			\begin{theorem}
				Let $A$ be a principal ideal ring, and $L$ a finite separable extension of its quotient field $K$, of degree $n$. Let $B$ be the integral closure of $A$ in $L$. Then $B$ is a free module of rank $n$ over $A$. 
			\end{theorem}
		
			\begin{proof}
				Since $A$ is contained in $K$, $B$ is contained in $L$, whenever $ab=0$ with $a \in A$, $b \in B$, we have $a=0$ or $b=0$. Hence $B$ is torsion-free. Therefore as a finitely generated (theorem \ref{closure-f-g}) torsion-free module, $B$ is a free module over $A$ \href{http://du.ac.in/du/uploads/departments/mathematics/study-material/MMATH18-201\%20_MT_PID.pdf}{[Theorem 2.7]}. Since $L$ is a $n$-dimensional vector space over $K$, for $y \in L$ we have
				\[
					y = c_1e_1+\cdots+c_ne_n
				\]
				where $e_1,\dots,e_n$ is a basis and $c_1,\cdots,c_n \in K$. When $y \in B$, we must have $c_1,\cdots,c_n \in A$, which is to say $B$ has rank $[L:K]=n$.
			\end{proof}
			Hence the rank of $\OK$ over $\Z$ is determined by $[K:\Q]$.
		
		\subsection{Localisation}
		
			\begin{theorem}
				Let $A \subset B$ be rings, and $S$ a multiplicatively closed subset of $A$. If $B$ is integral over $A$, then $S^{-1}B$ is integrally closed in $S^{-1}A$. If $C$ is the integral closure of $A$ in $B$, then $S^{-1}C$ is the integral closure of $S^{-1}A$. 
			\end{theorem}
		
			\begin{proof}
				First we assume $B$ is integral over $A$. Pick $x/s \in S^{-1}B$ with $x \in B$ and $s \in S$. By definition we have
				\[
					x^n + a_1x^{n-1}+\cdots + a_n = 0
				\]
				with $a_i \in A$. Multiplying by $(1/s)^n$ gives
				\[
					(x/s)^n + (a_1/s)(x/s)^{n-1}+\cdots+a_n/s^n = 0
				\]
				which shows that $x/s$ is integral over $S^{-1}A$. Hence the first statement is proved. \\
				Now we assume $C$ is the integral closure of $A$ in $B$. By the first statement we see $S^{-1}C$ is integral over $S^{-1}A$. Suppose $b/s \in S^{-1}B$ is integral over $S^{-1}A$, we have an equation of the form
				\[
					(b/s)^n+(a_1/s_1)(b/s)^{n-1}+\cdots+a_n/s_n=0.
				\]
				Multiplying by $(st)^n$ where $t=s_1\cdots s_n$ gives an equation of integral independence for $bt$ over $A$. Hence $bt \in C$. But $b/s = bt/st$, hence $b/s \in S^{-1}C$ and we are done. 
			\end{proof}
		
			If $S$ happens to be a complement of a prime ideal $\mfk{p}$, we have a satisfying result
			
			\begin{corollary}
				If $B$ is integral over $A$, then $B_\mfk{p}$ is integral over $A_\mfk{p}$.
			\end{corollary}
			
			If $B$ is replaced by a field extension $L$ of the quotient field of $A$, and $C$ is replaced by the integral closure of $A$, we have the following corollary:
			
			\begin{corollary}
				If $B$ is the integral closure of $A$ in some field extension $L$ of the quotient field of $A$, then $S^{-1}B$ is the integral closure of $S^{-1}A$ in $L$.
			\end{corollary}
			
			% TODO: ADD SOME EXAMPLES
		
		\subsection{Prime ideals and Dedekind domain}
			% TODO: O_K IS DEDEKIND.
			By theorem \ref{closure-f-g}, $\OK$ is a finitely-generated $\Z$-module, hence is a Noetherian domain. By transitivity of integral closures, $\OK$ is integrally closed. We are now interested in the Krull dimension of $\OK$.
			\begin{theorem}
				Every prime ideal $P$ in $\OK$ is maximal. Hence $\OK$ is of Krull dimension $1$ and is therefore Dedekind.
			\end{theorem}
			To prove this, we investigate more of the prime ideal with respect to integral closure. 
			\begin{definition}
				Let $B$ be a ring containing a ring $A$. Let $\mfk{p}$ be a prime ideal of $A$ and $\mfk{P}$ a prime ideal of $B$. We say that $\mfk{P}$ \textbf{lies above} $\mfk{p}$ if $\mfk{P} \cap A = \mfk{p}$ and we then write $\mfk{P}|\mfk{p}$.
			\end{definition}
			
			If $\mfk{P}|\mfk{p}$, we have a commutative diagram:
			\[
				\begin{tikzcd}
					B \arrow[r, "\pi'"]               & B/\mathfrak{P}                  \\
					A \arrow[r, "\pi"] \arrow[u, "i"] & A/\mathfrak{p} \arrow[u, "i'"']
				\end{tikzcd}
			\]
			where $i$ and $i'$ are inclusions, $\pi$ and $\pi'$ are canonical homomorphisms. \\
			If $B$ is integral over $A$, then $B/\mfk{P}$ is integral over $A/\mfk{p}$, this is because of the following lemma:
			\begin{lemma}
				Let $A \subset B$ be rings, and $\sigma:B \to C$ be a homomorphism. If $B$ is integral over $A$, then $\sigma(B)$ is integral over $\sigma(A)$.
			\end{lemma}
			\begin{proof}
				If $B$ is integral over $A$, then for any $x \in B$ there is an equation
				\[
					x^n + a_{n-1}x^{n-1}+\cdots+a_0 = 0.
				\]
				Therefore
				\[
					\begin{aligned}
						\sigma(x^n+a_{n-1}x^{n-1}+\cdots+a_0) &= \sigma(x^n)+\sigma(a_{n-1}x^{n-1})+\cdots+\sigma(a_0) \\
															  &= \sigma(x)^n + \sigma(a_{n-1})\sigma(x)^{n-1}+\cdots+\sigma(\sigma) \\
															  &= 0.
					\end{aligned}
				\]
				Hence $\sigma(x)$ is integral in $\sigma(A)$.
			\end{proof}
			And we can simply take $\sigma$ to be $\pi'$.